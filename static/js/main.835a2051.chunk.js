(this["webpackJsonpmindlessbraincells.github.io"]=this["webpackJsonpmindlessbraincells.github.io"]||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),s=a.n(r),o=(a(108),a(36)),i=a(13),u=(a(109),a(22)),l=a.n(u),d=a(30),j=a(18),b=a(15),O=a(188),h=a(187),m=a(4),p=Object(n.createContext)({open:!0,message:"",color:"error",show:function(e,t){}}),f=function(){return Object(n.useContext)(p)},x=function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)("default message"),o=Object(j.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)("info"),d=Object(j.a)(l,2),b=d[0],f=d[1],x=function(){return r(!1)};return Object(m.jsxs)(p.Provider,{value:{open:c,message:i,color:b,show:function(e,t){r(!0),u(e),f(t)}},children:[e.children,Object(m.jsx)(O.a,{open:c,autoHideDuration:2500,onClose:x,children:Object(m.jsx)(h.a,{severity:b,variant:"filled",color:b,onClose:x,children:i})})]})},v=a(82),g=a.n(v);var y=function(){var e=g.a.create({baseURL:"https://0kyglyd7i5.execute-api.ap-southeast-1.amazonaws.com/prod/api/v1"});return e.interceptors.response.use((function(e){return e}),function(){var t=Object(d.a)(l.a.mark((function t(a){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===(n=a.response)||void 0===n?void 0:n.data)||(a.response=a.response?a.response:{data:{},status:500,statusText:"",headers:{},config:{}},a.response.data={message:"Cannot connect to the API"}),![401].includes(a.response.status)||!a.config){t.next=5;break}return c=a.config,localStorage.removeItem("access_token"),t.abrupt("return",e(c));case 5:throw[403].includes(a.response.status)&&localStorage.removeItem("access_token"),a;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}(),w=(a(134),function(e){return e.ready?e.content:Object(m.jsx)("div",{className:"flex h-screen w-screen justify-center items-center",children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"loader",children:Object(m.jsxs)("div",{className:"pacman",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})})})})}),k=function(e){var t=e.ready,a=e.children;return Object(m.jsx)(n.Fragment,{children:Object(m.jsx)(w,{content:a,ready:t})})},N={name:"",email:"",avatar:""},D=Object(n.createContext)({user:Object(b.a)({},N),token:"",isAuthenticated:!1,setCredential:function(){},forgetCredential:function(){}}),L=function(e){var t=f().show,a=Object(n.useState)(N),c=Object(j.a)(a,2),r=c[0],s=c[1],o=Object(n.useState)(!1),i=Object(j.a)(o,2),u=i[0],b=i[1],O=Object(n.useState)(!1),h=Object(j.a)(O,2),p=h[0],x=h[1];Object(n.useEffect)((function(){var e=localStorage.getItem("access_token"),t=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,n,c,r,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/me",{headers:{Authorization:t}});case 3:a=e.sent,n=a.data,c=n.email,r=n.name,o=n.picture,i=n.token,localStorage.setItem("access_token",i),s({avatar:o,email:c,name:r}),b(!0),x(!0),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),localStorage.removeItem("access_token"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();if(!e)return b(!1),void x(!0);t(e)}),[u,p]);var v=function(){var e=Object(d.a)(l.a.mark((function e(a){var n,c,r,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/me",{headers:{Authorization:a.token}});case 3:n=e.sent,c=n.data,r=c.email,o=c.name,i=c.picture,u=c.token,s({email:r,name:o,avatar:i}),localStorage.setItem("access_token",u),b(!0),x(!0),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),t("Login failed","error"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(D.Provider,{value:{setCredential:v,forgetCredential:function(){localStorage.removeItem("access_token"),b(!1),x(!0)},user:r,isAuthenticated:u,ready:p},children:Object(m.jsx)(k,{ready:p,children:e.children})})},R=function(){return Object(n.useContext)(D)},C=a(59),A=["component","render"],S=function(e){var t=e.component,a=e.render,n=Object(C.a)(e,A),c=R().isAuthenticated;return Object(m.jsx)(i.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return c?Object(m.jsx)(i.a,{to:{pathname:"/",state:{prev:e.location}}}):t?Object(m.jsx)(t,Object(b.a)({},e)):a(e)}}))},I=["component","render"],E=function(e){var t=e.component,a=e.render,n=Object(C.a)(e,I),c=R().isAuthenticated;return Object(m.jsx)(i.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return c?t?Object(m.jsx)(t,Object(b.a)({},e)):a(e):Object(m.jsx)(i.a,{to:{pathname:"/login",state:{prev:e.location}}})}}))},M=(a(138),a(181)),Y=a(182),P=a(189),_=a(183),F=a(180),G=Object(M.a)((function(e){return{menuPadding:{flexGrow:1},menu:{}}})),z=function(e){var t=G(),a=Object(i.g)(),c=f(),r=R(),s=r.user,o=r.isAuthenticated,u=r.forgetCredential;return Object(m.jsx)(n.Fragment,{children:Object(m.jsxs)("div",{className:"min-h-screen min-w-full",children:[o&&Object(m.jsx)(Y.a,{position:"sticky",color:"inherit",children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)("div",{className:t.menuPadding}),Object(m.jsx)("div",{className:t.menu,children:Object(m.jsx)(F.a,{onClick:function(e){u(),a.push("/"),c.show("Logout successfully","success")},children:Object(m.jsx)(P.a,{alt:s.name,src:s.avatar})})})]})}),Object(m.jsx)("div",{className:"min-h-screen min-w-full topbar-margin",children:e.children})]})})},T=(a(139),a(83)),B=function(){var e=R().setCredential,t=f();return Object(m.jsx)("div",{className:"grid min-w-full max-w-full min-h-screen max-h-screen justify-center content-center",children:Object(m.jsx)("div",{children:Object(m.jsx)(T.GoogleLogin,{disabled:!1,clientId:"895838726199-iail3bsvbstv185f4evo6c7fdivgpiih.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(a){var n={email:a.profileObj.email,avatar:a.profileObj.imageUrl,name:a.profileObj.name,token:a.tokenId};e(n),t.show("Welcome ".concat(n.name,"!"),"success")},onFailure:function(){t.show("Login failed","error")},cookiePolicy:"single_host_origin"})})})},U=(a(140),function(e){var t=e.month,a=e.day,c=e.year,r=e.handleRemoveLeave,s=Object(n.useState)(!1),o=Object(j.a)(s,2),i=o[0],u=o[1],l=i?r:function(){},d=i?" cursor-pointer":"";return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"grid shadow-md w-48 h-48 bg-white rounded-md justify-center justify-items-center items-center".concat(d),onMouseOver:function(e){u(!0)},onMouseOut:function(e){u(!1)},onClick:l,children:i?Object(m.jsx)("p",{className:"text-red-500 cursor-pointer",children:"Remove leave"}):Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)("p",{className:"text-3xl",children:t}),Object(m.jsx)("p",{className:"text-7xl",children:a}),Object(m.jsx)("p",{className:"text-2xl",children:c})]})})})});U.defaultProps={month:"February",day:"6",year:"1996",handleRemoveLeave:function(){return console.log("removed")}};var J=U,W=function(e){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"grid animate-pulse shadow-md w-48 h-48 bg-white rounded-md justify-center justify-items-center",children:Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)("p",{className:"text-3xl"}),Object(m.jsx)("p",{className:"text-7xl"}),Object(m.jsx)("p",{className:"text-2xl"})]})})})};W.defaultProps={};var H=W,K=function(e){var t=e.data,a=e.isLoaded,c=e.onCardRemove,r=function(){return a?t.length?t.map((function(e){return Object(n.createElement)(J,Object(b.a)(Object(b.a)({},e),{},{key:e.id,handleRemoveLeave:function(){return c(e.id)}}))})):Object(m.jsx)("div",{className:"mt-20",children:Object(m.jsx)("p",{className:"text-4xl text-yellow-400",children:"No upcoming leaves"})}):Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)(H,{}),Object(m.jsx)(H,{}),Object(m.jsx)(H,{}),Object(m.jsx)(H,{}),Object(m.jsx)(H,{})]})};return Object(m.jsx)("div",{className:"grid grid-flow-col gap-4",children:Object(m.jsx)(r,{})})};K.defaultProps={data:[],isLoaded:!1,onCardRemove:function(){}};var q=K,Q=a(20),V=a(186),X=a(185),Z=a(86),$=a(184),ee=a(87),te=Object(ee.a)({palette:{primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884",contrastText:"#fff"},secondary:{light:"#ededed",main:"#ffffff",dark:"#c7c5c5",contrastText:"#fff"}}}),ae=function(e){var t=e.date,a=e.handleDateChange,n=e.label;return Object(m.jsx)($.a,{theme:te,children:Object(m.jsx)(Q.a,{utils:Z.a,children:Object(m.jsx)(X.a,{container:!0,justify:"space-around",children:Object(m.jsx)(V.a,{margin:"normal",disablePast:!0,id:"date-picker-dialog",label:n,format:"yyyyMMdd",value:t,fullWidth:!0,color:"secondary",onChange:a,KeyboardButtonProps:{"aria-label":"change date"}})})})})};ae.defaultProps={date:new Date,handleDateChange:function(){},label:"Pick-a-date"};var ne=ae,ce=a(43),re=a.n(ce),se=a(58),oe=a.n(se);re.a.extend(oe.a);var ie=function(e){try{return(e=e.interrupts).map((function(e){var t=e.date,a=re()(t.toString(),"YYYYMMDD").format("YYYY-MMMM-DD").split("-"),n=Object(j.a)(a,3),c=n[0],r=n[1],s=n[2];return{id:e.date,month:r,day:s,year:c}}))}catch(t){throw t}},ue=a(65),le={LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},de={status:null,data:{}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le.LOADING:return Object(b.a)(Object(b.a)({},de),{},{status:le.LOADING,data:t.data});case le.LOADED:return Object(b.a)(Object(b.a)({},e),{},{status:le.LOADED,data:t.data});case le.ERROR:return Object(b.a)(Object(b.a)({},e),{},{status:le.ERROR,data:t.data});default:return e}},be=a(85),Oe=a.n(be);re.a.extend(oe.a);var he=function(){var e=R().forgetCredential,t=Object(i.g)(),a=Object(n.useReducer)(je,de),c=Object(j.a)(a,2),r=c[0],s=c[1],o=Object(n.useCallback)(function(){var a=Object(d.a)(l.a.mark((function a(n,c,o){var i,u,d,b,O,h,m,p;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:le.LOADING,data:r.data}),a.prev=1,i=localStorage.getItem("access_token"),u={params:o,headers:{Authorization:i}},d=re()(c.toString(),"YYYYMMDD").format("YYYY-MMMM-DD").split("-"),b=Object(j.a)(d,3),O=b[0],h=b[1],m=b[2],p={date:c},a.next=8,y.post(n,p,u);case 8:s({type:le.LOADED,data:[].concat(Object(ue.a)(r.data),[{id:c,year:O,month:h,day:m}])}),a.next=18;break;case 11:if(a.prev=11,a.t0=a.catch(1),![401,403].includes(a.t0.response.status)){a.next=17;break}return e(),t.push("/login"),a.abrupt("return");case 17:s({type:le.ERROR,data:a.t0.response.data});case 18:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e,t,n){return a.apply(this,arguments)}}(),[t,e,r]),u=Object(n.useCallback)(function(){var a=Object(d.a)(l.a.mark((function a(n,c,r){var o,i,u,d;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:le.LOADING}),a.prev=1,o=localStorage.getItem("access_token"),i={params:c,headers:{Authorization:o}},a.next=6,y.get(n,i);case 6:u=a.sent,d=u.data,r&&(d=r(d)),s({type:le.LOADED,data:d}),a.next=19;break;case 12:if(a.prev=12,a.t0=a.catch(1),![401,403].includes(a.t0.response.status)){a.next=18;break}return e(),t.push("/login"),a.abrupt("return");case 18:s({type:le.ERROR,data:a.t0.response.data});case 19:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e,t,n){return a.apply(this,arguments)}}(),[t,e]),b=Object(n.useCallback)(function(){var a=Object(d.a)(l.a.mark((function a(n,c){var o,i,u;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:le.LOADING,data:r.data}),a.prev=1,o=localStorage.getItem("access_token"),i=Oe.a.remove(Object(ue.a)(r.data),(function(e){return e.id!==c})),u={headers:{Authorization:o}},a.next=7,y.delete("".concat(n,"/").concat(c),u);case 7:s({type:le.LOADED,data:i}),a.next=17;break;case 10:if(a.prev=10,a.t0=a.catch(1),![401,403].includes(a.t0.response.status)){a.next=16;break}return e(),t.push("/login"),a.abrupt("return");case 16:s({type:le.ERROR,data:a.t0.response.data});case 17:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e,t){return a.apply(this,arguments)}}(),[r,t,e]);return{state:r,remove:b,post:o,get:u}},me=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],c=t[1],r=he(),s=f();Object(n.useEffect)((function(){a||(r.get("/interrupts",{},ie),c(!0))}),[a,r]);return Object(m.jsxs)("div",{className:"grid mx-auto justify-center justify-items-center min-w-full mt-16 grid-cols-12",children:[Object(m.jsx)("div",{className:"row-span-1 col-span-12",children:Object(m.jsx)("p",{className:"text-6xl text-white mb-11",children:"Add a leave"})}),Object(m.jsx)("div",{className:"row-span-1 col-span-12 w-96",children:Object(m.jsx)(ne,{handleDateChange:function(e,t){r.post("/interrupts",+t),s.show("Leave for ".concat(t," has been added"),"success")}})}),Object(m.jsx)("div",{className:"row-span-1 col-span-12 mt-12",children:Object(m.jsx)("p",{className:"text-6xl text-white mb-11",children:"Upcoming leaves"})}),Object(m.jsx)("div",{className:"row-span-8 col-span-12 mt-5",children:Object(m.jsx)(q,{data:r.state.data,isLoaded:a,onCardRemove:function(e){r.remove("/interrupts",e),s.show("Leave for ".concat(e," has been removed"),"success")}})})]})};var pe=function(){return Object(m.jsx)(o.a,{basename:"",children:Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(x,{children:Object(m.jsx)(L,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(z,{children:Object(m.jsxs)(i.d,{children:[Object(m.jsx)(S,{exact:!0,path:"/login",component:B}),Object(m.jsx)(E,{exact:!0,path:"/",component:me})]})})})})})})})},fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,191)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(pe,{})}),document.getElementById("root")),fe()}},[[143,1,2]]]);
//# sourceMappingURL=main.835a2051.chunk.js.map